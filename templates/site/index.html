
{% extends "base.html" %}
{% block content %}
<h1 class="text-2xl font-bold mb-4">Overview</h1>
<div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-8">
  <div class="bg-white p-4 rounded shadow"><div class="text-sm text-gray-500">Total</div><div class="text-2xl font-semibold">{{ metrics.total }}</div></div>
  <div class="bg-white p-4 rounded shadow"><div class="text-sm text-gray-500">New</div><div class="text-2xl font-semibold">{{ metrics.new }}</div></div>
  <div class="bg-white p-4 rounded shadow"><div class="text-sm text-gray-500">Applied</div><div class="text-2xl font-semibold">{{ metrics.applied }}</div></div>
  <div class="bg-white p-4 rounded shadow"><div class="text-sm text-gray-500">Confirmed</div><div class="text-2xl font-semibold">{{ metrics.confirmed }}</div></div>
</div>

<h2 class="text-xl font-semibold mb-2">Recent Jobs</h2>
<div class="bg-white rounded shadow divide-y">
  {% for j in jobs %}
  <div class="p-4 flex items-center justify-between">
    <div>
      <div class="font-semibold">{{ j.title }}</div>
      <div class="text-sm text-gray-600">{{ j.company }} â€” {{ j.location or "" }}</div>
      <a class="text-blue-600 text-sm hover:underline" href="{{ j.link }}" target="_blank">Open</a>
    </div>
    <form action="/jobs/{{ j.id }}/status" method="post" class="flex gap-2">
      <select name="new_status" class="border rounded px-2 py-1">
        {% for s in ["new","applied","confirmed","skipped"] %}
          <option value="{{ s }}" {% if j.status==s %}selected{% endif %}>{{ s }}</option>
        {% endfor %}
      </select>
      <button class="px-3 py-1 bg-gray-900 text-white rounded">Save</button>
    </form>
  </div>
  {% else %}
  <div class="p-4 text-gray-500">No jobs yet. Run <code>python main.py scrape</code>.</div>
  {% endfor %}
</div>
{% endblock %}
